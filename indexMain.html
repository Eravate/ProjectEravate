<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="script/jquery.js"></script>
    <script src="script/commands.js"></script>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <title>Eravate Project</title>
    <script src="script/three.js"></script>
    <script>
        // DATA NEEDED TO START THE APP
        var numPlanet = 2;
        var planets;
        var audio;
        var sfx = new Audio('music/swipe.mp3');
        sfx.volume = 0.05;
        var vis = false;
        fetchData();
    </script>
</head>
<body>
    <main>
        <div id="landscape">
            <!-- All the Content -->
            <div id="content">

                <!-- Title Layer -->
                <img id="planet" alt="Planet">
                <div id="navbar"><span id="planetname"></span>
                <div id="imgnav"><img src="icons/threed.png" id="threed" alt="3D"><img src="icons/console.png" id="console" alt="Console"><img src="icons/eye.png" id="see" alt="See"></div></div>

                <!-- Information Layer -->
                <div id="consoleDiv">
                    <div id="consoleDivheader"><img src="icons/reddot.png" id="reddot" alt="Close"></div>
                    <div id="textArea"></div>
                    <!--<div id="consoleInfo">Eravate@EravateProject:</div>--><input id="consoleInput" type="text">
                </div>
                <div id="infoleft">
                    <p class="lefttitle">Mass:</p><p class="leftinfo" id="mass"></p><br>
                    <p class="lefttitle">Radius:</p><p class="leftinfo" id="radius"></p><br>
                    <p class="lefttitle">Gravity:</p><p class="leftinfo" id="gravity"></p><br>
                    <p class="lefttitle">Surface Temp:</p><p class="leftinfo" id="temperature"></p><br>
                    <p class="lefttitle">Surface Press:</p><p class="leftinfo" id="pressure"></p><br>
                    <p class="lefttitle">Orbital Period:</p><p class="leftinfo" id="period"></p><br>
                    <p class="lefttitle">Semi Major Axis:</p><p class="leftinfo" id="axis"></p><br>
                    <p class="lefttitle">Axial Tilt:</p><p class="leftinfo" id="tilt"></p><br>
                    <p class="lefttitle">Orbital Speed:</p><p class="leftinfo" id="speed"></p><br>
                </div>
                <div id="inforight">
                    <p class="righttitle">Type:</p><p class="rightinfo" id="type"></p><br>
                    <p class="righttitle">Volcanism:</p><p class="rightinfo" id="volcanism"></p><br>
                    <p class="righttitle">Atmosphere Type:</p><p class="rightinfo" id="atmosphere"></p><br>
                    <p class="righttitle">Atmosphere:</p><p class="rightinfo" id="atmosphere1"></p><br>
                    <p class="righttitle"></p><p class="rightinfo" id="atmosphere2"></p><br>
                    <p class="righttitle"></p><p class="rightinfo" id="atmosphere3"></p><br>
                    <p class="righttitle">Composition:</p><p class="rightinfo" id="composition1"></p><br>
                    <p class="righttitle"></p><p class="rightinfo" id="composition2"></p><br>
                </div>

                <!-- Navigation Layer -->
                <div id="goleft"><img src="icons/left.png" id="arrowleft"></div>
                <div id="goright"><img src="icons/right.png" id="arrowright"></div>
                
                <!-- Music Layer -->
                <div id="music">
                    <div id="musictitle">Now Playing...</div>
                    <div id="musicname">Gato by Nowhere Voyage</div>
                    <div id="musiccontrols">
                        <img src="icons/skipleft.png" id="previous">
                        <img src="icons/pause.png" id="pauseplay">
                        <img src="icons/skipright.png" id="next">
                        <input type="range" id="volume" min="0" max="100">
                    </div>
                </div>

                <!-- Transition Layer -->
                <div class="top-layer"></div>
                <div class="top-layer top-layer--1"></div>
                <div class="top-layer top-layer--2"></div>
                <div class="top-layer top-layer--3"></div>
                <div class="top-layer top-layer--4"></div>
                <div class="top-layer top-layer--5">ERAVATE</div>
            </div>
        </div>
        <div id="portrait">
            <img src="icons/ptl.gif" id="ctl" alt="Switch to Portrait">
        </div>
    </main>
    <script>
        // Command needed to recognize Enter key
        document.getElementById('consoleInput').onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.code || e.key;
            if (keyCode == 'Enter'){
                $("#textArea").append($("#consoleInput").val() + "<br>");
                $("#consoleInput").val("");
            }
        }
        // Allows the dragging of the command prompt
        dragElement(document.getElementById("consoleDiv"));
        // Make console invisible at the beginning
        $("#consoleDiv").toggle();
        // Make console toggle on click
        $("#console").click(function(){
            $("#consoleDiv").fadeToggle(500);
            $("#consoleInput").focus();
            $("#consoleInput").val("");
        });
        $("#reddot").click(function(){
            $("#consoleDiv").fadeToggle(500);
            setTimeout(clearTextArea,500);
        })
        // Make menu and info disappear on click
        $('#see').click(function(){
            $('#navbar').fadeOut(500);
            $('#infoleft').fadeOut(500);
            $('#inforight').fadeOut(500);
            $('#goleft').fadeOut(500);
            $('#goright').fadeOut(500);
            $('#music').fadeOut(500);
            audio.play();
            vis = true;
        });
        // Make menu and info come back after mouse moves
        $(document).mousemove(function(){
            if (vis) {
                $('#navbar').fadeIn(500);
                $('#infoleft').fadeIn(500);
                $('#inforight').fadeIn(500);
                $('#goleft').fadeIn(500);
                $('#goright').fadeIn(500);
                $('#music').fadeIn(500);
                vis = false;
                audio.pause();
                audio.currentTime = 0;
            }
        });
        // Make left arrow disappear when there are no more planets
        $("#arrowleft").click(function() {
            numPlanet--;
            if (numPlanet==0) {
                $("#arrowleft").toggle();
            }
            if (numPlanet==7) {
                $("#arrowright").toggle();
            }

            var layerClass = ".top-layer";
            var layers = document.querySelectorAll(layerClass);
            for (const layer of layers) {
                layer.classList.toggle("active");
            }
            sfx.play();
            setTimeout(fillWithPlanet,500);
        });
        // Make right arrow disappear when there are no more planets
        $("#arrowright").click(function() {
            numPlanet++;
            if (numPlanet==1) {
                $("#arrowleft").toggle();
            }
            if (numPlanet==8) {
                $("#arrowright").toggle();
            }

            var layerClass = ".top-layer";
            var layers = document.querySelectorAll(layerClass);
            for (const layer of layers) {
                layer.classList.toggle("active");
            }
            sfx.play();
            setTimeout(fillWithPlanet,500);
        });
        waitForPlanets();
    </script>
</body>
</html>